<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/xhtml;charset=utf-8" http-equiv="Content-Type"/>
<meta content="IE=9" http-equiv="X-UA-Compatible"/>
<meta content="Doxygen 1.8.17" name="generator"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Atom API Reference: AZ::RHI::PipelineLibrary Class Reference</title>
<link href="/css/api-ref/tabs.css" rel="stylesheet" type="text/css"/>
<script src="jquery.js" type="text/javascript"></script>
<script src="dynsections.js" type="text/javascript"></script>
<link href="/css/api-ref/doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellpadding="0" cellspacing="0">
<tbody>
<tr style="height: 56px;">
<td id="projectalign" style="padding-left: 0.5em;">
<div id="projectname">Atom API Reference
   </div>
</td>
</tr>
</tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script src="menudata.js" type="text/javascript"></script>
<script src="menu.js" type="text/javascript"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div class="navpath" id="nav-path">
<ul>
<li class="navelem"><a class="el" href="namespace_a_z.html">AZ</a></li><li class="navelem"><b>RHI</b></li><li class="navelem"><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a></li> </ul>
</div>
</div><!-- top -->
<div class="header">
<div class="summary">
<a href="#pub-methods">Public Member Functions</a> |
<a href="class_a_z_1_1_r_h_i_1_1_pipeline_library-members.html">List of all members</a> </div>
<div class="headertitle">
<div class="title">AZ::RHI::PipelineLibrary Class Reference</div> </div>
</div><!--header-->
<div class="contents">
<p><code>#include &lt;PipelineLibrary.h&gt;</code></p>
<p>Inherits <a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html">AZ::RHI::DeviceObject</a>.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acdc853d72fd0f6f377b7a418d653383b"><td align="right" class="memItemLeft" valign="top"><a id="acdc853d72fd0f6f377b7a418d653383b"></a>
 </td><td class="memItemRight" valign="bottom"><b>AZ_RTTI</b> (<a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a>, "{843579BE-57E4-4527-AB00-C0217885AEA9}")</td></tr>
<tr class="separator:acdc853d72fd0f6f377b7a418d653383b"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a82b810ceb4825e6c8a9320e1fe2b3c8b"><td align="right" class="memItemLeft" valign="top">ResultCode </td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html#a82b810ceb4825e6c8a9320e1fe2b3c8b">Init</a> (<a class="el" href="class_a_z_1_1_r_h_i_1_1_device.html">Device</a> &amp;device, const <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library_data.html">PipelineLibraryData</a> *serializedData)</td></tr>
<tr class="separator:a82b810ceb4825e6c8a9320e1fe2b3c8b"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a7bbe336b304b9dc3636be88e2eb188a9"><td align="right" class="memItemLeft" valign="top">ResultCode </td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html#a7bbe336b304b9dc3636be88e2eb188a9">MergeInto</a> (AZStd::array_view&lt; const <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> * &gt; librariesToMerge)</td></tr>
<tr class="separator:a7bbe336b304b9dc3636be88e2eb188a9"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:af96f22a63a365b2b37bfb492de756ef7"><td align="right" class="memItemLeft" valign="top">ConstPtr&lt; <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library_data.html">PipelineLibraryData</a> &gt; </td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html#af96f22a63a365b2b37bfb492de756ef7">GetSerializedData</a> () const</td></tr>
<tr class="separator:af96f22a63a365b2b37bfb492de756ef7"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="inherit_header pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_a_z_1_1_r_h_i_1_1_device_object')"><img alt="-" src="/images/api-ref/closed.png"/> Public Member Functions inherited from <a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html">AZ::RHI::DeviceObject</a></td></tr>
<tr class="memitem:af8ebb6e0733cffe3f3d2b61f8c9b47df inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td align="right" class="memItemLeft" valign="top"><a id="af8ebb6e0733cffe3f3d2b61f8c9b47df"></a>
 </td><td class="memItemRight" valign="bottom"><b>AZ_RTTI</b> (<a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html">DeviceObject</a>, "{17D34F71-944C-4AF5-9823-627474C4C0A6}", Object)</td></tr>
<tr class="separator:af8ebb6e0733cffe3f3d2b61f8c9b47df inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a084b1f4b7301a8ac485d8d90c3d76f79 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td align="right" class="memItemLeft" valign="top"><a id="a084b1f4b7301a8ac485d8d90c3d76f79"></a>
bool </td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html#a084b1f4b7301a8ac485d8d90c3d76f79">IsInitialized</a> () const</td></tr>
<tr class="memdesc:a084b1f4b7301a8ac485d8d90c3d76f79 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="mdescLeft"> </td><td class="mdescRight">Returns whether the device object is initialized. <br/></td></tr>
<tr class="separator:a084b1f4b7301a8ac485d8d90c3d76f79 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a60ef85d32f44322001e14bde7493dc21 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td align="right" class="memItemLeft" valign="top"><a class="el" href="class_a_z_1_1_r_h_i_1_1_device.html">Device</a> &amp; </td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html#a60ef85d32f44322001e14bde7493dc21">GetDevice</a> () const</td></tr>
<tr class="separator:a60ef85d32f44322001e14bde7493dc21 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="inherit_header pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_a_z_1_1_r_h_i_1_1_object')"><img alt="-" src="/images/api-ref/closed.png"/> Public Member Functions inherited from <a class="el" href="class_a_z_1_1_r_h_i_1_1_object.html">AZ::RHI::Object</a></td></tr>
<tr class="memitem:a012597da80a60928f8f647bed014be73 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td align="right" class="memItemLeft" valign="top"><a id="a012597da80a60928f8f647bed014be73"></a>
 </td><td class="memItemRight" valign="bottom"><b>AZ_RTTI</b> (<a class="el" href="class_a_z_1_1_r_h_i_1_1_object.html">Object</a>, "{E43378F1-2331-4173-94B8-990ED20E6003}")</td></tr>
<tr class="separator:a012597da80a60928f8f647bed014be73 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a9486615a64c9e9f0ce2c6eb0bbab2d35 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td align="right" class="memItemLeft" valign="top">void </td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_object.html#a9486615a64c9e9f0ce2c6eb0bbab2d35">SetName</a> (const Name &amp;name)</td></tr>
<tr class="separator:a9486615a64c9e9f0ce2c6eb0bbab2d35 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a3974b3af221310b51746ee2b193b57e8 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td align="right" class="memItemLeft" valign="top">const Name &amp; </td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_object.html#a3974b3af221310b51746ee2b193b57e8">GetName</a> () const</td></tr>
<tr class="separator:a3974b3af221310b51746ee2b193b57e8 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="memSeparator" colspan="2"> </td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_a_z_1_1_r_h_i_1_1_device_object')"><img alt="-" src="/images/api-ref/closed.png"/> Protected Member Functions inherited from <a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html">AZ::RHI::DeviceObject</a></td></tr>
<tr class="memitem:a80ab91a69f8f962f519c29f6529cac51 inherit pro_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td align="right" class="memItemLeft" valign="top"><a id="a80ab91a69f8f962f519c29f6529cac51"></a>
void </td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html#a80ab91a69f8f962f519c29f6529cac51">Init</a> (<a class="el" href="class_a_z_1_1_r_h_i_1_1_device.html">Device</a> &amp;device)</td></tr>
<tr class="memdesc:a80ab91a69f8f962f519c29f6529cac51 inherit pro_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="mdescLeft"> </td><td class="mdescRight">The derived class should call this method to assign the device. <br/></td></tr>
<tr class="separator:a80ab91a69f8f962f519c29f6529cac51 inherit pro_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="memSeparator" colspan="2"> </td></tr>
</table>
<a id="details" name="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_state.html">PipelineState</a> initialization is an expensive operation on certain platforms. If multiple pipeline states are created with little variation between them, the contents are still duplicated. This class is an allocation context for pipeline states, provided at <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_state.html#a7f271720cb9796cfdddb6fbdcce9f9af">PipelineState::Init</a>, which will perform de-duplication of internal pipeline state components and cache the results.</p>
<p>Practically speaking, if many pipeline states are created with shared data between them (e.g. permutations of the same shader), then providing a <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> instance will reduce the memory footprint and cost of compilation.</p>
<p>Additionally, the <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> is able to serialize the internal driver-contents to and from an opaque data blob. This enables building up a pipeline state cache on disk, which can dramatically reduce pipeline state compilation cost when run from a pre-warmed cache.</p>
<p><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> is thread-safe, in the sense that it will take a lock during compilation. It is possible to initialize pipeline states across threads using the same <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> instance, but this will result in the two calls serializing on the mutex. Instead, see <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_state_cache.html">PipelineStateCache</a> which stores a <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> instance per thread to avoid this contention. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af96f22a63a365b2b37bfb492de756ef7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af96f22a63a365b2b37bfb492de756ef7">◆ </a></span>GetSerializedData()</h2>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname">ConstPtr&lt;<a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library_data.html">PipelineLibraryData</a>&gt; AZ::RHI::PipelineLibrary::GetSerializedData </td>
<td>(</td>
<td class="paramname"></td><td>)</td>
<td> const</td>
</tr>
</table>
</div><div class="memdoc">
<p>Serializes the platform-specific data and returns it as a new <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library_data.html">PipelineLibraryData</a> instance. The data is opaque to the user and can only be used to re-initialize the library. Use this method to extract serialized data prior to application shutdown, save it to disk, and use it when initializing on subsequent runs. </p>
</div>
</div>
<a id="a82b810ceb4825e6c8a9320e1fe2b3c8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82b810ceb4825e6c8a9320e1fe2b3c8b">◆ </a></span>Init()</h2>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname">ResultCode AZ::RHI::PipelineLibrary::Init </td>
<td>(</td>
<td class="paramtype"><a class="el" href="class_a_z_1_1_r_h_i_1_1_device.html">Device</a> &amp; </td>
<td class="paramname"><em>device</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library_data.html">PipelineLibraryData</a> * </td>
<td class="paramname"><em>serializedData</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Initializes the pipeline library from a platform-specific data payload. This data is generated by calling GetSerializedData in a previous run of the application. When run for the first time, the serialized data should be empty. When the application completes, the library can be serialized and the contents saved to disk. Subsequent loads will experience much faster pipeline state creation times (on supported platforms). On success, the library is transitioned to the initialized state. On failure, the library remains uninitialized. </p><dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramname">serializedData</td><td>The initial serialized data used to initialize the library. It can be null. </td></tr>
</table>
</dd>
</dl>
</div>
</div>
<a id="a7bbe336b304b9dc3636be88e2eb188a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bbe336b304b9dc3636be88e2eb188a9">◆ </a></span>MergeInto()</h2>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname">ResultCode AZ::RHI::PipelineLibrary::MergeInto </td>
<td>(</td>
<td class="paramtype">AZStd::array_view&lt; const <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> * &gt; </td>
<td class="paramname"><em>librariesToMerge</em></td><td>)</td>
<td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Merges the contents of other libraries into this library. This method must be called on an initialized library. A common use case for this method is to construct thread-local libraries and merge them into a single unified library. The serialized data can then be extracted from the unified library. An error code is returned on failure and the behavior is as if the method was never called. </p>
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 19 2021 13:57:55 for Atom API Reference by  <a href="http://www.doxygen.org/index.html">
<img alt="doxygen" class="footer" src="/images/api-ref/doxygen.png"/>
</a> 1.8.17
</small></address>
</body>
</html>
